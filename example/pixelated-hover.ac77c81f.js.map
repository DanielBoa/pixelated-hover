{"version":3,"sources":["src/pixelated-hover.ts"],"names":[],"mappings":";AA2BC,IAAA,EAAA,MAAA,KAAA,gBAAA,WAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,UAAA,OAAA,EAAA,EAAA,IAAA,GAAA,UAAA,GAAA,OAAA,IAAA,EAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,IAAA,IAAA,IAAA,EAAA,UAAA,GAAA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GA3BK,EAAS,SAAS,cAAc,UAChC,EAAM,EAAO,WAAW,MACxB,EAAS,EAAO,SAAS,iBAA8B,2BAQ7D,SAAS,EAAqB,EAAwB,GAiBrD,IAAA,EAhBO,KAA+B,QAAjB,EAAA,EAAU,eAAO,IAAA,OAAA,EAAA,EAAE,iBAAkB,MACnD,EAAoB,EAAU,cAAgC,mBAC9D,EAAY,GAAqB,SAAS,cAAc,OACxD,EAAQ,KAAK,MAAM,EAAI,MAAQ,GAC/B,EAAS,KAAK,MAAM,EAAI,OAAS,GAEvC,EAAO,MAAQ,EACf,EAAO,OAAS,EAChB,EAAI,UAAU,EAAK,EAAG,EAAG,EAAO,GAEhC,EAAU,IAAM,EAAO,YACvB,EAAU,UAAU,IAAI,eAEnB,GACH,EAAU,YAAY,GArB1B,EAAU,QAAQ,SAAC,GACX,IAAA,EAAM,EAAU,cAAc,OAC/B,GACL,EAAI,iBAAiB,OAAQ,WAAM,OAAA,EAAqB,EAAW","file":"pixelated-hover.ac77c81f.js","sourceRoot":"..","sourcesContent":["const canvas = document.createElement('canvas');\r\nconst ctx = canvas.getContext('2d');\r\nconst instances = [...document.querySelectorAll<HTMLElement>('[data-pixelated-hover]')];\r\n\r\ninstances.forEach((container) => {\r\n  const img = container.querySelector('img');\r\n  if (!img) return;\r\n  img.addEventListener('load', () => createPixelatedHover(container, img));\r\n});\r\n\r\nfunction createPixelatedHover(container: HTMLElement, img: HTMLImageElement) {\r\n  const pixelSize = +(container.dataset?.pixelatedHover || '20');\r\n  const previousPixelated = container.querySelector<HTMLImageElement>('img.__pixelated');\r\n  const pixelated = previousPixelated || document.createElement('img');\r\n  const width = Math.floor(img.width / pixelSize);\r\n  const height = Math.floor(img.height / pixelSize);\r\n\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  ctx.drawImage(img, 0, 0, width, height);\r\n\r\n  pixelated.src = canvas.toDataURL();\r\n  pixelated.classList.add('__pixelated');\r\n\r\n  if (!previousPixelated) {\r\n    container.appendChild(pixelated);\r\n  }\r\n}"]}